<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoluciÃ³n Examen 3: Facturador de Servicio de EnergÃ­a</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #f39c12;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #f39c12;
            padding-left: 15px;
        }
        
        h3 {
            color: #e67e22;
            margin-top: 25px;
        }
        
        .class-diagram {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-line;
        }
        
        .scenario {
            background-color: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 15px;
            margin: 15px 0;
        }
        
        .code-block code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            color: #212529;
            white-space: pre;
            display: block;
        }
        
        pre.code-block {
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            overflow-x: auto;
        }
        
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        
        .explanation {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .page-break {
            page-break-before: always;
        }
        
        @media print {
            body {
                margin: 0;
                padding: 10px;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <h1>âš¡ Examen 3: Facturador de Servicio de EnergÃ­a</h1>

    <h2>ğŸ“‹ Enunciado del Examen</h2>
    
    <h3>Contexto</h3>
    <p>La empresa de energÃ­a municipal necesita un programa para calcular las facturas mensuales de electricidad, considerando el consumo, el estrato del hogar y aplicando penalizaciones por exceso de consumo.</p>

    <h3>Requerimientos Funcionales</h3>
    <p>El programa debe solicitar y procesar:</p>
    
    <table>
        <tr>
            <th>Datos del hogar</th>
            <th>Tarifas por kWh</th>
            <th>LÃ­mites y penalizaciones</th>
        </tr>
        <tr>
            <td>
                <ul>
                    <li>DirecciÃ³n</li>
                    <li>Estrato socioeconÃ³mico (1-6)</li>
                    <li>NÃºmero de personas en el hogar</li>
                    <li>Consumo del mes en kWh</li>
                </ul>
            </td>
            <td>
                <ul>
                    <li>Estratos 1-2: $350/kWh</li>
                    <li>Estratos 3-4: $450/kWh</li>
                    <li>Estratos 5-6: $550/kWh</li>
                </ul>
            </td>
            <td>
                <ul>
                    <li>Consumo base permitido: 200 kWh</li>
                    <li>Adicional por persona: 50 kWh</li>
                    <li>PenalizaciÃ³n por exceso: 50% adicional en el kWh sobre el excedente</li>
                    <li>Cargo fijo de servicio: $15.000</li>
                </ul>
            </td>
        </tr>
    </table>

    <p><strong>Salida esperada:</strong></p>
    <ul>
        <li>Tarifa por KW</li>
        <li>NÃºmero de kWh consumidos de mÃ¡s (Exceso de kWh)</li>
        <li>Costo total de consumo excesivo</li>
        <li>Total a pagar</li>
    </ul>

    <h3>Escenario de Ejemplo</h3>
    <table>
        <tr>
            <th>Entrada</th>
            <th>Salida</th>
        </tr>
        <tr>
            <td>
                DirecciÃ³n: Calle 45 #23-15<br>
                Estrato: 3<br>
                Personas: 4<br>
                Consumo: 450 kWh
            </td>
            <td>
                === FACTURA DE ENERGÃA ===<br>
                DirecciÃ³n: Calle 45 #23-15<br>
                PerÃ­odo: Mes actual<br>
                Consumo total: 450 kWh<br>
                LÃ­mite permitido: 400 kWh<br>
                Exceso: 50 kWh<br>
                Consumo normal (400 kWh x $450): $180.000<br>
                Consumo excedente (50 kWh x $675): $33.750<br>
                Cargo fijo: $15.000<br>
                TOTAL A PAGAR: $228.750
            </td>
        </tr>
    </table>

    <h3>Entregables</h3>
    <ol>
        <li><strong>Diagrama de clase</strong> de FacturadorEnergia con sus atributos y mÃ©todos</li>
        <li><strong>Diagrama de flujo</strong> del proceso de facturaciÃ³n</li>
        <li><strong>ImplementaciÃ³n en Java</strong> de toda la clase</li>
    </ol>

    <div class="page-break"></div>
    
    <h1>ğŸ“ SoluciÃ³n del Examen</h1>

    <h2>1. Diagrama de Clase</h2>
    <div class="class-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        FacturadorEnergia             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - direccion: String                  â”‚
â”‚ - estrato: int                       â”‚
â”‚ - numeroPersonas: int                â”‚
â”‚ - consumoMes: double                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + FacturadorEnergia()                â”‚
â”‚ + determinarTarifa(): double         â”‚
â”‚ + calcularLimite(): double           â”‚
â”‚ + calcularConsumoExceso(): double    â”‚
â”‚ + calcularCostoNormal(): double      â”‚
â”‚ + calcularCostoExcedente(): double   â”‚
â”‚ + obtenerCargoFijo(): double         â”‚
â”‚ + generarFactura(): double           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </div>

    <div class="page-break"></div>

    <h2>2. Diagramas de Flujo por MÃ©todo</h2>

    <h3>MÃ©todo: determinarTarifa()</h3>
    <div class="mermaid">
        flowchart TD
            A[INICIO determinarTarifa] --> B{estrato >= 1 AND estrato <= 2?}
            B -->|SÃ­| C[tarifa = 350]
            B -->|No| D{estrato >= 3 AND estrato <= 4?}
            D -->|SÃ­| E[tarifa = 450]
            D -->|No| F{estrato >= 5 AND estrato <= 6?}
            F -->|SÃ­| G[tarifa = 550]
            F -->|No| H[tarifa = 450]
            C --> I[RETORNAR tarifa]
            E --> I
            G --> I
            H --> I
    </div>

    <h3>MÃ©todo: calcularLimite()</h3>
    <div class="mermaid">
        flowchart TD
            A[INICIO calcularLimite] --> B[limite = 200 + numeroPersonas * 50]
            B --> C[RETORNAR limite]
    </div>

    <h3>MÃ©todo: calcularConsumoExceso()</h3>
    <div class="mermaid">
        flowchart TD
            A[INICIO calcularConsumoExceso] --> B[limitePermitido = calcularLimite]
            B --> C{consumoMes > limitePermitido?}
            C -->|SÃ­| D[exceso = consumoMes - limitePermitido]
            C -->|No| E[exceso = 0]
            D --> F[RETORNAR exceso]
            E --> F
    </div>

    <h3>MÃ©todo: calcularCostoNormal()</h3>
    <div class="mermaid">
        flowchart TD
            A[INICIO calcularCostoNormal] --> B[tarifaKwh = determinarTarifa]
            B --> C[limitePermitido = calcularLimite]
            C --> D{consumoMes <= limitePermitido?}
            D -->|SÃ­| E[costoNormal = consumoMes * tarifaKwh]
            D -->|No| F[costoNormal = limitePermitido * tarifaKwh]
            E --> G[RETORNAR costoNormal]
            F --> G
    </div>

    <h3>MÃ©todo: calcularCostoExcedente()</h3>
    <div class="mermaid">
        flowchart TD
            A[INICIO calcularCostoExcedente] --> B[consumoExceso = calcularConsumoExceso]
            B --> C[tarifaKwh = determinarTarifa]
            C --> D[costoExcedente = consumoExceso * tarifaKwh * 1.5]
            D --> E[RETORNAR costoExcedente]
    </div>

    <h3>MÃ©todo: obtenerCargoFijo()</h3>
    <div class="mermaid">
        flowchart TD
            A[INICIO obtenerCargoFijo] --> B[cargoFijo = 15000]
            B --> C[RETORNAR cargoFijo]
    </div>

    <h3>MÃ©todo: generarFactura()</h3>
    <div class="mermaid">
        flowchart TD
            A[INICIO generarFactura] --> B[costoNormal = calcularCostoNormal]
            B --> C[costoExcedente = calcularCostoExcedente]
            C --> D[cargoFijo = obtenerCargoFijo]
            D --> E[total = costoNormal + costoExcedente + cargoFijo]
            E --> F[RETORNAR total]
    </div>

    <div class="page-break"></div>

    <h2>3. ImplementaciÃ³n en Java</h2>
    <pre class="code-block"><code>import java.util.Scanner;
import java.text.DecimalFormat;

public class FacturadorEnergia {
    // Atributos - Solo datos de entrada
    private String direccion;
    private int estrato;
    private int numeroPersonas;
    private double consumoMes;
    
    // Constructor
    public FacturadorEnergia() {
        // Constructor vacÃ­o
    }
    
    // MÃ©todo para determinar tarifa segÃºn estrato
    public double determinarTarifa() {
        if (estrato >= 1 && estrato <= 2) {
            return 350; // $350/kWh
        } else if (estrato >= 3 && estrato <= 4) {
            return 450; // $450/kWh
        } else if (estrato >= 5 && estrato <= 6) {
            return 550; // $550/kWh
        }
        return 450; // Valor por defecto
    }
    
    // MÃ©todo para calcular lÃ­mite permitido
    public double calcularLimite() {
        return 200 + (numeroPersonas * 50); // Base 200 + 50 por persona
    }
    
    // MÃ©todo para calcular consumo en exceso
    public double calcularConsumoExceso() {
        double limitePermitido = calcularLimite();
        if (consumoMes > limitePermitido) {
            return consumoMes - limitePermitido;
        }
        return 0;
    }
    
    // MÃ©todo para calcular costo del consumo normal
    public double calcularCostoNormal() {
        double tarifaKwh = determinarTarifa();
        double limitePermitido = calcularLimite();
        
        if (consumoMes <= limitePermitido) {
            return consumoMes * tarifaKwh;
        } else {
            return limitePermitido * tarifaKwh;
        }
    }
    
    // MÃ©todo para calcular costo del consumo excedente
    public double calcularCostoExcedente() {
        double consumoExceso = calcularConsumoExceso();
        double tarifaKwh = determinarTarifa();
        
        // Consumo excedente con penalizaciÃ³n del 50%
        return consumoExceso * tarifaKwh * 1.5;
    }
    
    // MÃ©todo para obtener cargo fijo
    public double obtenerCargoFijo() {
        return 15000; // Cargo fijo establecido
    }
    
    // MÃ©todo principal para generar el total de la factura
    public double generarFactura() {
        double costoNormal = calcularCostoNormal();
        double costoExcedente = calcularCostoExcedente();
        double cargoFijo = obtenerCargoFijo();
        
        return costoNormal + costoExcedente + cargoFijo;
    }
}</code></pre>

    <div class="page-break"></div>

    <h2>4. Prueba con el Escenario de Ejemplo</h2>

    <div class="scenario">
        <h3>Entrada:</h3>
        <ul>
            <li>DirecciÃ³n: Calle 45 #23-15</li>
            <li>Estrato: 3</li>
            <li>Personas: 4</li>
            <li>Consumo: 450 kWh</li>
        </ul>

        <h3>CÃ¡lculos paso a paso:</h3>
        <table>
            <tr>
                <th>Paso</th>
                <th>OperaciÃ³n</th>
                <th>Resultado</th>
            </tr>
            <tr>
                <td>1</td>
                <td>Tarifa por kWh (estrato 3)</td>
                <td>$450</td>
            </tr>
            <tr>
                <td>2</td>
                <td>LÃ­mite permitido (200 + 4 Ã— 50)</td>
                <td>400 kWh</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Consumo exceso (450 - 400)</td>
                <td>50 kWh</td>
            </tr>
            <tr>
                <td>4</td>
                <td>Costo normal (400 Ã— $450)</td>
                <td>$180.000</td>
            </tr>
            <tr>
                <td>5</td>
                <td>Costo excedente (50 Ã— $450 Ã— 1.5)</td>
                <td>$33.750</td>
            </tr>
            <tr>
                <td>6</td>
                <td>Cargo fijo</td>
                <td>$15.000</td>
            </tr>
            <tr>
                <td>7</td>
                <td>Total a pagar</td>
                <td><strong>$228.750</strong></td>
            </tr>
        </table>

        <h3>Salida Esperada:</h3>
        <pre class="code-block"><code>=== FACTURA DE ENERGÃA ===
DirecciÃ³n: Calle 45 #23-15
PerÃ­odo: Mes actual

Consumo total: 450 kWh
LÃ­mite permitido: 400 kWh
Exceso: 50 kWh

Consumo normal (400 kWh x $450): $180.000
Consumo excedente (50 kWh x $675): $33.750
Cargo fijo: $15.000

TOTAL A PAGAR: $228.750</code></pre>
    </div>

    <h2>5. ExplicaciÃ³n del CÃ³digo</h2>
    
    <div class="explanation">
        <h3>Estructura de la Clase:</h3>
        <ol>
            <li><strong>Atributos privados</strong>: Solo almacenan los datos de entrada del hogar</li>
            <li><strong>Constructor</strong>: Constructor vacÃ­o simple</li>
            <li><strong>determinarTarifa()</strong>: Retorna la tarifa segÃºn el estrato socioeconÃ³mico</li>
            <li><strong>calcularLimite()</strong>: Calcula el consumo mÃ¡ximo permitido sin penalizaciÃ³n</li>
            <li><strong>calcularConsumoExceso()</strong>: Determina si hay consumo excedente</li>
            <li><strong>calcularCostoNormal()</strong>: Calcula el costo del consumo dentro del lÃ­mite</li>
            <li><strong>calcularCostoExcedente()</strong>: Calcula el costo con penalizaciÃ³n del 50%</li>
            <li><strong>obtenerCargoFijo()</strong>: Retorna el cargo fijo de servicio</li>
            <li><strong>generarFactura()</strong>: Calcula el total sumando todos los componentes</li>
        </ol>

        <h3>Puntos Clave:</h3>
        <ul>
            <li>Los valores calculados NO son atributos de la clase</li>
            <li>Cada cÃ¡lculo tiene su propio mÃ©todo que retorna el valor</li>
            <li>Los mÃ©todos se pueden llamar cuando se necesiten</li>
            <li>Solo se almacenan como atributos los datos ingresados por el usuario</li>
            <li>La lÃ³gica de negocio estÃ¡ separada en mÃ©todos especÃ­ficos</li>
            <li>PenalizaciÃ³n del 50% sobre consumo excedente implementada correctamente</li>
        </ul>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>